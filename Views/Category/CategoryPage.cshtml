@model IEnumerable<LapTrinhWebBanHang.Models.Product>
@{
    ViewBag.Title = "CagtegoryPage";
    Layout = "~/Views/Shared/_MasterLayout.cshtml";
}

<link rel="stylesheet" href="~/Content/Category_page/container_category.css" />

<div class="container-content category-page">
    <div class="slide">
        <img src="https://bizweb.dktcdn.net/100/108/842/collections/giay-bong-da-dinh-thap-tf.jpg?v=1499702390127" alt="" />
    </div>
    <div class="header-content">
        <div class="filter">
            <span class="filter-btn">Filter <i class="fa-solid fa-sliders"></i></span>
        </div>
        <div class="dropdown">
            <div class="dropdown-header" onclick="toggleDropdown()">
                Sắp xếp<span style="opacity: 0.6" id="selected-option"></span>
                <i style="margin: 0 0 0 2px;" class="fa-solid fa-angle-down icon"></i>
            </div>
            <ul class="dropdown-menu">
                <li onclick="selectOption(': Mới nhất')">Mới nhất</li>
                <li onclick="selectOption(': Cũ nhất')">Cũ nhất</li>
                <li onclick="selectOption(': Giá: Cao -> Thấp')">Giá: Cao -> Thấp</li>
                <li onclick="selectOption(': Giá: Thấp -> Cao')">Giá: Thấp -> Cao</li>
            </ul>
        </div>
    </div>
    <div class="content row">
        <div class="content-left col-xl-2 col-md-3">
            <div class="side-bar">
                <div class="product-size border-bot">
                    <div onclick="toggleSection('size-section')" class="container-toggle">
                        <h4>Kích thước</h4>
                        <i class="fa-solid fa-angle-down"></i>
                    </div>
                    <ul id="size-section" class="section-content">
                        <li class="style-everyList"><input type="checkbox" />35</li>
                        <li class="style-everyList"><input type="checkbox" />36</li>
                        <li class="style-everyList"><input type="checkbox" />37</li>
                        <li class="style-everyList"><input type="checkbox" />38</li>
                        <li class="style-everyList"><input type="checkbox" />39</li>
                        <li class="style-everyList"><input type="checkbox" />40</li>
                        <li class="style-everyList"><input type="checkbox" />41</li>
                        <li class="style-everyList"><input type="checkbox" />42</li>
                        <li class="style-everyList"><input type="checkbox" />43</li>
                        <li class="style-everyList"><input type="checkbox" />44</li>
                    </ul>
                </div>

                <!-- Chủng loại -->
                <div class="product-type border-bot">
                    <div onclick="toggleSection('type-section')" class="container-toggle">
                        <h4>Chủng loại</h4>
                        <i class="fa-solid fa-angle-down"></i>
                    </div>
                    <ul id="type-section" class="section-content">
                        <li class="style-everyList dis-block"><input type="checkbox" />ĐINH TF</li>
                        <li class="style-everyList dis-block"><input type="checkbox" />ĐINH FG</li>
                    </ul>
                </div>

                <!-- Thương hiệu -->
                <div class="product-brands border-bot">
                    <div onclick="toggleSection('brands-section')" class="container-toggle">
                        <h4>Thương hiệu</h4>
                        <i class="fa-solid fa-angle-down"></i>
                    </div>
                    <ul id="brands-section" class="section-content">
                        <li class="style-everyList dis-block"><input type="checkbox" />NIKE</li>
                        <li class="style-everyList dis-block"><input type="checkbox" />ADIDAS</li>
                        <li class="style-everyList dis-block"><input type="checkbox" />PUMA</li>
                        <li class="style-everyList dis-block"><input type="checkbox" />MIZUNO</li>
                    </ul>
                </div>

                <!-- Mức giá -->
                <div class="product-price border-bot">
                    <div onclick="toggleSection('price-section')" class="container-toggle">
                        <h4>Giá</h4>
                        <i class="fa-solid fa-angle-down"></i>
                    </div>
                    <ul id="price-section" class="section-content">
                        <li class="style-everyList dis-block"><input type="checkbox" />Trên 500K</li>
                        <li class="style-everyList dis-block"><input type="checkbox" />500k - 1tr</li>
                        <li class="style-everyList dis-block"><input type="checkbox" />1tr - 2tr</li>
                        <li class="style-everyList dis-block"><input type="checkbox" />Trên 2tr</li>
                    </ul>
                </div>

                <!-- Màu sắc -->
                <div class="product-color">
                    <div onclick="toggleSection('color-section')" class="container-toggle">
                        <h4>Màu sắc</h4>
                        <i class="fa-solid fa-angle-down"></i>
                    </div>
                    <ul id="color-section" class="section-content">
                        <li style="background-color: red;"></li>
                        <li style="background-color: white;"></li>
                        <li style="background-color: yellow;"></li>
                        <li style="background-color: blue;"></li>
                        <li style="background-color: green;"></li>
                        <li style="background-color: gray;"></li>
                        <li style="background-color: orangered;"></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="content-right col-xl-10 col-md-9">
            <div class="container-products row" id="list-products">
                @if (Model.Any())
                {
                    foreach (var product in Model)
                    {
                        <div class="product-item col-lg-3 col-sm-4 col-6">
                            <a style="color: black; text-decoration: none;" href="@Url.Action("ProductPage", "ProductPage", new { id = product.ProductID })">
                                <div class="product-image">
                                    <img src="~/Image/product-image/@product.ImageURL" alt="@product.ProductName" />
                                </div>
                                <div class="product-content">
                                    <h6>@product.ProductName</h6>
                                    <p class="description-product">@product.Description</p>
                                    <p class="price">@product.Price.ToString("C")</p>
                                </div>
                            </a>
                        </div>
                    }
                }
                else
                {
                    <p>Không có sản phẩm nào trong danh mục này.</p>
                }
            </div>
        </div>
        <div class="number-list">
            <ul>
                <li><<</li>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>>></li>
            </ul>
        </div>
    </div>
</div>
</div>

<script>
    @*// Hàm để tải danh sách sản phẩm từ Controller
function loadProducts() {
    fetch('@Url.Action("GetAllProductsJson", "HomePage")')
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                const products = data.data;
                const productList = document.getElementById('list-products');
                productList.innerHTML = ''; // Làm trống danh sách trước khi thêm mới

                // Duyệt qua danh sách sản phẩm và thêm vào HTML
                products.forEach(product => {
                    const productItem = document.createElement('div');
                    productItem.classList.add('product-item', 'col-lg-3', 'col-sm-4', 'col-6');

                    // Bao cả phần product-item trong thẻ a để khi click vào toàn bộ sản phẩm sẽ chuyển tới ProductPage
                    productItem.innerHTML = `
                     <a style="color: black; text-decoration: none;" href="/Carts/AddToCart?productId=${product.ProductID}&quantity=1" class="btn btn-primary">Thêm vào giỏ</a>
                    <a style="color: black; text-decoration: none;" href="@Url.Action("ProductPage", "ProductPage")/${product.ProductID}">
                        <div class="product-image">
                            <img src="@Url.Content("~/Image/product-image/${product.ImageURL}")" alt="${product.ProductName}" />
                        </div>
                        <div class="product-content">
                            <h6>${product.ProductName}</h6>
                            <p class="description-product">${product.Description}</p>
                            <p class="price">${product.Price.toLocaleString()}</p>
                        </div>
                    </a>
                    `;
                    productList.appendChild(productItem);
                });
            } else {
                console.log('Không thể tải sản phẩm');
            }
        })
        .catch(error => console.log('Lỗi:', error));
    }
    document.addEventListener('DOMContentLoaded', function () {
        loadProducts();
    });*@
</script>
